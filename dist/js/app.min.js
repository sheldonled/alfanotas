!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=2)}([function(a,b){a.exports=function(){this.count=0,this.getHtml=function(a){var b=a.err?"alert":"success",c=a.err?a.err:a.msg;return'<div class="callout '+b+" alfanotas-msg-"+this.count+'">\n                <span class="close msg-'+this.count+'">X</span>   \n                '+c+"\n              </div>\n              "},this.getDiv=function(a){var b=document.createElement("div");return b.innerHTML=this.getHtml(a),b.firstChild}}},function(a,b,c){a.exports=function(a,b,d,e,f){var g=c(3)(),h=function(a){return Number(a)||0},i=c(4)("pt_br"),j=function(a){return Number(Math.round(a+"e2")+"e-2")},k=function(a,b){return j((h(a)+h(b))/2)},l=function(a,b,c){return j((h(a)+h(b)+h(c))/3)},m=function(a,b,c,d){return j((l(a,b,c)+h(d))/2)},n=function(a){return a+10>=16?{n2:j(16-a)}:o(a,10,{n2:10})},o=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r(a,b))return{msg:i.approved};if(a+b<6)return{msg:i.reproved};var d=j(a+b);if(d+10>=18)c.n3=j(18-d),c.msg=i.needsN3;else{c.n3=10;var e=p(a,b,c.n3);c.n4=e.n4,c.msg=e.msg}return c},p=function(a,b,c){var d=l(a,b,c);return r(a,b,c)?{msg:i.approved}:d-12>0?{msg:i.reproved}:{n4:j(12-d),msg:i.needsN4}},q=function(a,b,c,d){return{msg:r(a,b,c,d)?i.approved:i.reproved}},r=function(a,b,c,d){return!(h(a)+h(b)<=6)&&(k(a,b)>=8||(l(a,b,c)>=6||m(a,b,c,d)>=6))},s=function(a,b,c,d){switch(!0){case!!d:return m(a,b,c,d);case!!c:return l(a,b,c);default:return k(a,b)}},t=function(a,b){return{name:a,n1:b.n1,n2:b.n2,n3:b.n3,n4:b.n4}};return{name:a,marks:{n1:b,n2:d,n3:e,n4:f},isApproved:function(){return r(this.marks.n1,this.marks.n2,this.marks.n3,this.marks.n4)},getAvgMarks:function(){return s(this.marks.n1,this.marks.n2,this.marks.n3,this.marks.n4)},projectMarksNeeded:function(){switch(!0){case!!this.marks.n4:return q(this.marks.n1,this.marks.n2,this.marks.n3,this.marks.n4);case!!this.marks.n3:return p(this.marks.n1,this.marks.n2,this.marks.n3);case!!this.marks.n2:return o(this.marks.n1,this.marks.n2);case!!this.marks.n1:return n(this.marks.n1);default:return{}}},getAllSubjects:function(){return g.getSubjects()},saveAllSubjects:function(a){return g.saveSubjects(a)},saveSubject:function(a){var b=!1,c=g.getSubjects();return Object.keys(a).map(function(b,c){["n1","n2","n3","n4"].indexOf(b)>=0&&void 0!==a[b]&&null!==a[b]&&(a[b]=a[b].toString().replace(/,/g,"."),a[b]=isNaN(a[b])?null:Number(a[b]),a[b]>10&&(a[b]=null))}),c=c.map(function(c){return c.name==a.name&&(b=!0,c.n1=a.n1,c.n2=a.n2,c.n3=a.n3,c.n4=a.n4),c}),b||c.push(a),g.saveSubjects(c)},save:function(){var a=g.getSubjects();return self=this,a.filter(function(a){return a.name===self.name}).length>0?{err:i.compose("subjAlreadyExists",self.name)}:(a.push(t(this.name,this.marks)),g.saveSubjects(a),{msg:i.compose("subjAdded",self.name)})},delete:function(a){var b=!1,c=g.getSubjects();return c=c.filter(function(c){if(c.name!=a)return!0;b=!0}),g.saveSubjects(c),objReturn={},b?objReturn.msg=i.compose("subjDeleted",a):objReturn.err=i.compose("subjNotDeleted",a),objReturn}}}},function(a,b,c){!function(){var a=c(1),b=c(0),d={scrollTop:0,alert:new b,loadSubjects:function(b){b.subjectBar(""),b.totalSubs((new a).getAllSubjects()),b.totalSubs.notifySubscribers()},changeView:function(a){var b=document.getElementsByClassName("app__view--main")[0],c=document.getElementsByClassName("app__view--edit")[0];switch(a){case"main":b.style.left=0,c.style.left="100%",window.setTimeout(function(){d.scrollTop>0&&(document.body.scrollTop=d.scrollTop)},400);break;case"edit":d.scrollTop=document.body.scrollTop,b.style.left="-100%",c.style.left=0}},LocalSubject:function(b){var c=this;subj=new a(b.name,b.n1,b.n2,b.n3,b.n4),this.name=ko.observable(b.name),this.n1=ko.observable(b.n1),this.n2=ko.observable(b.n2),this.n3=ko.observable(b.n3),this.n4=ko.observable(b.n4),this.statusMsg=subj.projectMarksNeeded().msg,this.marksProjected=subj.projectMarksNeeded(),this.isProjected=function(a){return Object.keys(c.marksProjected).indexOf(a)>=0},this.viewOpened=ko.observable(b.viewOpened)},addAlert:function(a){document.getElementById("alerts").appendChild(this.alert.getDiv(a))}},e=function(){var a=this;a.editSubj=ko.observable(new d.LocalSubject({})),a.subjectBar=ko.observable(""),a.totalSubs=ko.observableArray(),a.subjects=ko.computed(function(){return ko.utils.arrayFilter(a.totalSubs(),function(b){return b.name.match(new RegExp(a.subjectBar(),"i"))}).map(function(a){return new d.LocalSubject(a)})}),d.loadSubjects(a)};e.prototype.addSubject=function(){if(!(this.subjectBar().length<=0)){var b=new a(this.subjectBar()).save();d.addAlert(b),d.loadSubjects(this)}},e.prototype.editSubject=function(a){this.editSubj(this.subjects()[a]),d.changeView("edit")},e.prototype.cancelEdit=function(){var a=this;window.setTimeout(function(){return a.editSubj(new d.LocalSubject({}))},400),d.changeView("main")},e.prototype.saveEdit=function(){(new a).saveSubject(ko.toJS(this.editSubj())),this.cancelEdit(),d.loadSubjects(this)},e.prototype.deleteSubject=function(){var b=(new a).delete(this.editSubj().name());console.log(b),this.cancelEdit(),d.loadSubjects(this)},e.prototype.toggleDetailView=function(a){this.subjects()[a].viewOpened(!this.subjects()[a].viewOpened())},ko.applyBindings(new e,document.body),document.body.addEventListener("click",function(a){a.target.classList.value.match(/close/gi)&&a.target.parentNode.parentNode.removeChild(a.target.parentNode)})}()},function(a,b){a.exports=function(){return{getSubjects:function(){var a=JSON.parse(localStorage.getItem("subjects"));return a||(a=[]),a},saveSubjects:function(a){localStorage.setItem("subjects",JSON.stringify(a))}}}},function(a,b){a.exports=function(a){switch(a){case"pt_br":var b={approved:"Passou!",reproved:"Reprovado!",needsN3:"Volte para os livros, você vai para N3!",needsN4:"Não entre em pânico, mas você vai para N4!",subjAlreadyExists:"A matéria %s já existe",subjAdded:"Matéria %s adicionada",subjDeleted:"Matéria %s deletada",subjNotDeleted:"Erro ao deletar matéria %s"};return b.compose=function(a,c){return b[a].replace(/%s/gi,c)},b}}}]);